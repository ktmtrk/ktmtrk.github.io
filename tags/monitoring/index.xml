<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>monitoring on Hacking</title>
    <link>https://ktmtrk.github.io/tags/monitoring/</link>
    <description>Recent content in monitoring on Hacking</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 01 Sep 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://ktmtrk.github.io/tags/monitoring/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Script Monitoreo de Recursos</title>
      <link>https://ktmtrk.github.io/posts/scripts/monitoreorecursos/</link>
      <pubDate>Wed, 01 Sep 2021 00:00:00 +0000</pubDate>
      
      <guid>https://ktmtrk.github.io/posts/scripts/monitoreorecursos/</guid>
      <description>Script realizado para obtener algunos valores del top (linux) filtrado de columnas, el script se ejecuta cada 30&amp;rsquo; para imprimirlos por pantalla y a la vez grabar cada registro en un archivo csv En este caso se adapto para sacar la carga de 48 nucleos de un servidor.
load_avg.sh
#!/bin/bash sep=&amp;#34;|&amp;#34; #title head=&amp;#34;timestamp&amp;#34;$sep&amp;#34;load_avg&amp;#34;$sep&amp;#34;%-/&amp;#34;$sep&amp;#34;free_mem&amp;#34;$sep&amp;#34;proc01&amp;#34;$sep&amp;#34;proc_02&amp;#34;$sep&amp;#34;proc_03&amp;#34;$sep&amp;#34;proc_04&amp;#34;$sep&amp;#34;proc_05&amp;#34;$sep&amp;#34;proc_06&amp;#34;$sep&amp;#34;proc07&amp;#34;$sep&amp;#34;proc_08&amp;#34;$sep&amp;#34;proc_09&amp;#34;$sep&amp;#34;proc_10&amp;#34;$sep&amp;#34;proc_11&amp;#34;$sep&amp;#34;proc_12&amp;#34;$sep&amp;#34;proc_13&amp;#34;$sep&amp;#34;proc_14&amp;#34;$sep&amp;#34;proc_15&amp;#34;$sep&amp;#34;proc_16&amp;#34;$sep&amp;#34;proc_17&amp;#34;$sep&amp;#34;proc_18&amp;#34;$sep&amp;#34;proc_19&amp;#34;$sep&amp;#34;proc_20&amp;#34;$sep&amp;#34;proc_21&amp;#34;$sep&amp;#34;proc_22&amp;#34;$sep&amp;#34;proc_23&amp;#34;$sep&amp;#34;proc_24&amp;#34;$sep&amp;#34;proc_25&amp;#34;$sep&amp;#34;proc_26&amp;#34;$sep&amp;#34;proc_27&amp;#34;$sep&amp;#34;proc_28&amp;#34;$sep&amp;#34;proc_29&amp;#34;$sep&amp;#34;proc_30&amp;#34;$sep&amp;#34;proc_31&amp;#34;$sep&amp;#34;proc_32&amp;#34;$sep&amp;#34;proc_33&amp;#34;$sep&amp;#34;proc_34&amp;#34;$sep&amp;#34;proc_35&amp;#34;$sep&amp;#34;proc_36&amp;#34;$sep&amp;#34;proc_37&amp;#34;$sep&amp;#34;proc_38&amp;#34;$sep&amp;#34;proc_39&amp;#34;$sep&amp;#34;proc_40&amp;#34;$sep&amp;#34;proc_41&amp;#34;$sep&amp;#34;proc_42&amp;#34;$sep&amp;#34;proc_42&amp;#34;$sep&amp;#34;proc_43&amp;#34;$sep&amp;#34;proc_44&amp;#34;$sep&amp;#34;proc_45&amp;#34;$sep&amp;#34;proc_46&amp;#34;$sep&amp;#34;proc_47&amp;#34;$sep&amp;#34;proc_48&amp;#34; echo $head echo $head &amp;gt; loadavg_output.csv for (( ; ; )); do	#LOOP INFINITO #variables timestamp=`date +%Y-%m-%d_%H-%M-%S` load=`cat /proc/loadavg | awk &amp;#39;{print $1}&amp;#39;` quote=`df -h / | awk &amp;#39;{print $5}&amp;#39;| tail -n 1` #uso del directorio raiz free_mem=`free -g | awk &amp;#39;{print $3}&amp;#39; | sed -n 2p` #Procesadores (48) proc_01=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $2}&amp;#39;` proc_02=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $4}&amp;#39;` proc_03=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $6}&amp;#39;` proc_04=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $8}&amp;#39;` proc_05=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $10}&amp;#39;` proc_06=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $12}&amp;#39;` proc_07=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $14}&amp;#39;` proc_09=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $16}&amp;#39;` proc_10=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $18}&amp;#39;` proc_11=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $20}&amp;#39;` proc_12=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $22}&amp;#39;` proc_13=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $24}&amp;#39;` proc_14=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $26}&amp;#39;` proc_15=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $28}&amp;#39;` proc_16=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $30}&amp;#39;` proc_17=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $32}&amp;#39;` proc_18=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $34}&amp;#39;` proc_19=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $36}&amp;#39;` proc_20=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $38}&amp;#39;` proc_21=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $40}&amp;#39;` proc_22=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $42}&amp;#39;` proc_23=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $44}&amp;#39;` proc_24=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $46}&amp;#39;` proc_25=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $48}&amp;#39;` proc_26=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $50}&amp;#39;` proc_27=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $52}&amp;#39;` proc_28=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $54}&amp;#39;` proc_29=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $56}&amp;#39;` proc_30=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $58}&amp;#39;` proc_31=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $60}&amp;#39;` proc_32=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $62}&amp;#39;` proc_33=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $64}&amp;#39;` proc_34=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $66}&amp;#39;` proc_35=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $68}&amp;#39;` proc_36=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $70}&amp;#39;` proc_37=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $72}&amp;#39;` proc_38=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $74}&amp;#39;` proc_39=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $76}&amp;#39;` proc_40=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $78}&amp;#39;` proc_41=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $80}&amp;#39;` proc_42=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $82}&amp;#39;` proc_43=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $84}&amp;#39;` proc_44=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $86}&amp;#39;` proc_45=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $88}&amp;#39;` proc_46=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $90}&amp;#39;` proc_47=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $92}&amp;#39;` proc_48=`top | head -n 3 | sed -n 3p | awk &amp;#39;{print $94}&amp;#39;` sleep 30 &amp;amp;	#guardo toda la info dentro de una variable var=$(echo $timestamp$sep$load$sep$quote$sep$free_mem$sep$proc_01$sep$proc_02$sep$proc_03$sep$proc_04$sep$proc_05$sep$proc_06$sep$proc_07$sep$proc_08sep$proc_09$sep$proc_10$sep$proc_11$sep$proc_12$sep$proc_13$sep$proc_14$sep$proc_15$sep$proc_16$sep$proc_17$sep$proc_18$sep$proc_19$sep$proc_20$sep$proc_21$sep$proc_22$sep$proc_23$sep$proc_24$sep$proc_25$sep$proc_26$sep$proc_27$sep$proc_28$sep$proc_29$sep$proc_30$sep$proc_31$sep$proc_32$sep$proc_33$sep$proc_34$sep$proc_35$sep$proc_36$sep$proc_37$sep$proc_38$sep$proc_39$sep$proc_40$sep$proc_41$sep$proc_42$sep$proc_43$sep$proc_44$sep$proc_45$sep$proc_46$sep$proc_47$sep$proc_48) echo $var echo $var &amp;gt;&amp;gt; loadavg_output.</description>
    </item>
    
  </channel>
</rss>
